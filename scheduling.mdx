---
title: Scheduling
icon: clock
iconType: light
description: Defer responses for subsequent retrieval.
---

## Asynchronous mode

An API call that includes the `mode=async` key-value pair will be satisfied asynchronously:

```bash
$ curl -H "Authorization: Bearer $AGENT_FIRST_TOKEN" \
  'https://api.agentfirst.dev/search'\
  '?terms=foo'\
  '&mode=async'
```

```bash
$ curl -H "Authorization: Bearer $AGENT_FIRST_TOKEN" \
  'https://api.agentfirst.dev/browser'\
  '?url=https://example.com/'\
  '&mode=async'
```

In response, the API will provide a JSON job identifier:

```json
{ "id": "078fd246-f0f7-44a0-aabb-cadd7b12454f" }
```

```json
{ "id": "1851dab8-4619-409f-893f-47dd3a180bc3" }
```

The job results or content or job status can be requested at any time thereafter by passing the
identifier to **https://&zwj;api.agentfirst.dev/search/results** or
**https://&zwj;api.agentfirst.dev/browser/content**:

```bash
$ curl -H "Authorization: Bearer $AGENT_FIRST_TOKEN" \
  'https://api.agentfirst.dev/search/results'\
  '?id=078fd246-f0f7-44a0-aabb-cadd7b12454f'
```

```bash
$ curl -H "Authorization: Bearer $AGENT_FIRST_TOKEN" \
  'https://api.agentfirst.dev/browser/content'\
  '?id=1851dab8-4619-409f-893f-47dd3a180bc3'
```

The results or content, if ready, will be returned in the <Link href='search#response-format'>same
format as synchronous results</Link> or <Link href='browser#response-format'>synchronous
content</Link>; otherwise, a JSON status message will be returned.

A `retrieving` status indicates that the search or request is in progress:

```json
{ "status": "retrieving" }
```

A `failed` status indicates that the search or request was unsuccessful and the call should be
retried:

```json
{ "status": "failed" }
```

Here are the scheduling keys and values:

| Key    | Required | Value                                                                                                     |
| :----- | :------- | :-------------------------------------------------------------------------------------------------------- |
| `mode` | ⬜       | The synchronous or asynchronous mode of retrieving content, `sync` or `async`; `sync` is the default mode |
| `id`   | ⬜       | The identifier provided by the API for an asynchronous job                                                |
